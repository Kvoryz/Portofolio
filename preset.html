<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Preset</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      .preset-description {
        margin-top: 20px;
        padding: 15px;
        background-color: #f8f9fa;
        border-radius: 5px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      }
      .navigation-btn {
        background-color: rgba(0, 0, 0, 0.6);
        color: white;
        border: none;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        display: flex;
        justify-content: center;
        align-items: center;
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        z-index: 10;
        transition: all 0.3s ease;
      }
      .navigation-btn:hover {
        background-color: rgba(0, 0, 0, 0.8);
        color: #fff;
      }
      .nav-prev {
        left: 15px;
      }
      .nav-next {
        right: 15px;
      }
      .modal-navigation {
        position: relative;
      }
      /* Pagination dots */
      .pagination-dots {
        display: flex;
        justify-content: center;
        margin-top: 15px;
        position: relative;
        z-index: 20;
      }
      .dot {
        width: 12px;
        height: 12px;
        background-color: #ccc;
        border-radius: 50%;
        margin: 0 5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }
      .dot.active {
        background-color: #007bff;
      }
      .preset-card {
        cursor: pointer;
        transition: transform 0.3s ease;
      }
      .preset-card:hover {
        transform: translateY(-5px);
      }
    </style>
  </head>
  <body>
    <div id="home" class="container">
      <header
        class="d-flex justify-content-between align-items-center py-3 border-bottom"
      >
        <div class="d-flex align-items-center">
          <img
            src="image/icon.png"
            alt="icon"
            width="50"
            height="50"
            class="me-2"
          />
          <div class="fs-4 fw-bold">Clover</div>
        </div>
        <nav>
          <a href="index.html" class="text-decoration-none text-dark me-4"
            >Home</a
          >
          <a href="about.html" class="text-decoration-none text-dark me-4"
            >About Me</a
          >
          <a href="preset.html" class="text-decoration-none text-dark"
            >Preset</a
          >
        </nav>
      </header>
      <h1 class="text-center mb-5 mt-5">Preset AM</h1>
      <section id="preset" class="row g-4">
        <!-- Individual Preset -->
        <div class="col-md-4">
          <div
            class="card shadow-sm preset-card"
            data-description="Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dicta voluptatum saepe debitis repelladwm"
            data-title="PRESET 1"
            data-index="0"
          >
            <video
              class="card-img-top preset-video"
              style="height: 320px; object-fit: cover"
              loop
              muted
              preload="none"
              poster="videos/jj1.mp4?poster=true"
            >
              <source src="videos/jj1.mp4" type="video/mp4" />
              Your browser does not support the video tag.
            </video>
            <div class="card-body text-center">
              <h5 class="card-title">PRESET 1</h5>
              <p class="card-text">
                Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dicta
                voluptatum saepe debitis repellendus molestias quas.
              </p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div
            class="card shadow-sm preset-card"
            data-description="Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dicta voluptatum saepe debitis repelladwm"
            data-title="PRESET 2"
            data-index="1"
          >
            <video
              class="card-img-top preset-video"
              style="height: 320px; object-fit: cover"
              loop
              muted
              preload="none"
              poster="videos/jj3.mp4?poster=true"
            >
              <source src="videos/jj3.mp4" type="video/mp4" />
              Your browser does not support the video tag.
            </video>
            <div class="card-body text-center">
              <h5 class="card-title">PRESET 2</h5>
              <p class="card-text">
                Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dicta
                voluptatum saepe debitis repellendus molestias quas.
              </p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div
            class="card shadow-sm preset-card"
            data-description="Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dicta voluptatum saepe debitis repelladwm"
            data-title="PRESET 3"
            data-index="2"
          >
            <video
              class="card-img-top preset-video"
              style="height: 320px; object-fit: cover"
              loop
              muted
              preload="none"
              poster="videos/jj5.mp4?poster=true"
            >
              <source src="videos/jj5.mp4" type="video/mp4" />
              Your browser does not support the video tag.
            </video>
            <div class="card-body text-center">
              <h5 class="card-title">PRESET 3</h5>
              <p class="card-text">
                Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dicta
                voluptatum saepe debitis repellendus molestias quas.
              </p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div
            class="card shadow-sm preset-card"
            data-description="Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dicta voluptatum saepe debitis repelladwm"
            data-title="PRESET 4"
            data-index="3"
          >
            <video
              class="card-img-top preset-video"
              style="height: 320px; object-fit: cover"
              loop
              muted
              preload="none"
              poster="videos/video4.mp4?poster=true"
            >
              <source src="videos/video4.mp4" type="video/mp4" />
              Your browser does not support the video tag.
            </video>
            <div class="card-body text-center">
              <h5 class="card-title">PRESET 4</h5>
              <p class="card-text">
                Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dicta
                voluptatum saepe debitis repellendus molestias quas.
              </p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div
            class="card shadow-sm preset-card"
            data-description="Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dicta voluptatum saepe debitis repellendus molestias quas."
            data-title="PRESET 5"
            data-index="4"
          >
            <video
              class="card-img-top preset-video"
              style="height: 320px; object-fit: cover"
              loop
              muted
              preload="none"
              poster="videos/video3.mp4?poster=true"
            >
              <source src="videos/video3.mp4" type="video/mp4" />
              Your browser does not support the video tag.
            </video>
            <div class="card-body text-center">
              <h5 class="card-title">PRESET 5</h5>
              <p class="card-text">
                Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dicta
                voluptatum saepe debitis repellendus molestias quas.
              </p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div
            class="card shadow-sm preset-card"
            data-description="Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dicta voluptatum saepe debitis repellendus molestias quas."
            data-title="PRESET 6"
            data-index="5"
          >
            <video
              class="card-img-top preset-video"
              style="height: 320px; object-fit: cover"
              loop
              muted
              preload="none"
              poster="videos/video5.mp4?poster=true"
            >
              <source src="videos/video5.mp4" type="video/mp4" />
              Your browser does not support the video tag.
            </video>
            <div class="card-body text-center">
              <h5 class="card-title">PRESET 6</h5>
              <p class="card-text">
                Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dicta
                voluptatum saepe debitis repellendus molestias quas.
              </p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div
            class="card shadow-sm preset-card"
            data-description="Sekarang ketika Anda mengklik tombol navigasi kiri atau kanan, baik video maupun deskripsinya akan berubah bersamaan. Saya juga memastikan bahwa judul preset di modal akan diperbarui sesuai dengan preset yang sedang ditampilkan."
            data-title="PRESET 7"
            data-index="6"
          >
            <video
              class="card-img-top preset-video"
              style="height: 320px; object-fit: cover"
              loop
              muted
              preload="none"
              poster="videos/video1.mp4?poster=true"
            >
              <source src="videos/video1.mp4" type="video/mp4" />
              Your browser does not support the video tag.
            </video>
            <div class="card-body text-center">
              <h5 class="card-title">PRESET 7</h5>
              <p class="card-text">
                Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dicta
                voluptatum saepe debitis repellendus molestias quas.
              </p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div
            class="card shadow-sm preset-card"
            data-description="Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dicta voluptatum saepe debitis repellendus molestias quas."
            data-title="PRESET 8"
            data-index="7"
          >
            <video
              class="card-img-top preset-video"
              style="height: 320px; object-fit: cover"
              loop
              muted
              preload="none"
              poster="videos/video6.mp4?poster=true"
            >
              <source src="videos/video6.mp4" type="video/mp4" />
              Your browser does not support the video tag.
            </video>
            <div class="card-body text-center">
              <h5 class="card-title">PRESET 8</h5>
              <p class="card-text">
                Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dicta
                voluptatum saepe debitis repellendus molestias quas.
              </p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div
            class="card shadow-sm preset-card"
            data-description="Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dicta voluptatum saepe debitis repellendus molestias quas."
            data-title="PRESET 9"
            data-index="8"
          >
            <video
              class="card-img-top preset-video"
              style="height: 320px; object-fit: cover"
              loop
              muted
              preload="none"
              poster="videos/video2.mp4?poster=true"
            >
              <source src="videos/video2.mp4" type="video/mp4" />
              Your browser does not support the video tag.
            </video>
            <div class="card-body text-center">
              <h5 class="card-title">PRESET 9</h5>
              <p class="card-text">
                Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dicta
                voluptatum saepe debitis repellendus molestias quas.
              </p>
            </div>
          </div>
        </div>
      </section>

      <div
        class="modal fade"
        id="videoModal"
        tabindex="-1"
        aria-labelledby="videoModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="videoModalLabel">Video Preset</h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <div class="row">
                <div class="col-md-6 modal-navigation">
                  <video
                    id="modalVideo"
                    class="w-100 rounded shadow-sm"
                    height="500px"
                    style="object-fit: cover"
                    preload="auto"
                    autoplay
                    loop
                  >
                    <source id="modalVideoSource" src="" type="video/mp4" />
                    Your browser does not support the video tag.
                  </video>
                  <div class="pagination-dots mt-3" id="paginationDots"></div>
                  <button id="prevBtn" class="navigation-btn nav-prev">
                    <i class="fas fa-chevron-left fa-lg"></i>
                  </button>
                  <button id="nextBtn" class="navigation-btn nav-next">
                    <i class="fas fa-chevron-right fa-lg"></i>
                  </button>
                </div>
                <div class="col-md-6 d-flex flex-column">
                  <h4 class="fw-bold" id="modalPresetTitle">Preset</h4>
                  <div class="preset-description">
                    <p id="modalPresetDescription" class="mb-0"></p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const modal = new bootstrap.Modal(
          document.getElementById("videoModal")
        );
        const modalVideo = document.getElementById("modalVideo");
        const modalVideoSource = document.getElementById("modalVideoSource");
        const modalPresetDescription = document.getElementById(
          "modalPresetDescription"
        );
        const modalTitle = document.getElementById("videoModalLabel");
        const modalPresetTitle = document.getElementById("modalPresetTitle");
        const prevBtn = document.getElementById("prevBtn");
        const nextBtn = document.getElementById("nextBtn");
        const paginationDots = document.getElementById("paginationDots");

        // Get all presets
        const presets = Array.from(document.querySelectorAll(".preset-card"));
        let currentPresetIndex = 0;

        // Setup Intersection Observer for videos
        const options = {
          root: null,
          rootMargin: "0px",
          threshold: 0.5,
        };

        // Create observer for video playing
        const videoObserver = new IntersectionObserver((entries) => {
          entries.forEach((entry) => {
            const video = entry.target;

            if (entry.isIntersecting) {
              // Load and play the video when visible
              video.preload = "auto";
              video.play();
            } else {
              // Pause and reset when not visible
              video.pause();
              video.currentTime = 0;
            }
          });
        }, options);

        // Observe all preset videos
        document.querySelectorAll(".preset-video").forEach((video) => {
          videoObserver.observe(video);
        });

        // Create pagination dots for modal
        function createPaginationDots() {
          paginationDots.innerHTML = "";
          presets.forEach((_, index) => {
            const dot = document.createElement("div");
            dot.classList.add("dot");
            if (index === currentPresetIndex) {
              dot.classList.add("active");
            }
            dot.dataset.index = index;
            dot.addEventListener("click", () => {
              loadPresetToModal(index);
            });
            paginationDots.appendChild(dot);
          });
        }

        // Function to load preset data into modal
        function loadPresetToModal(index) {
          currentPresetIndex = index;
          const preset = presets[index];
          const videoSrc = preset.querySelector("video source").src;
          const presetTitle = preset.getAttribute("data-title");
          const presetDescription = preset.getAttribute("data-description");

          // Update modal with appropriate data
          modalVideoSource.src = videoSrc;
          modalVideo.load();
          modalVideo.play();
          modalTitle.textContent = "Video Preset";
          modalPresetTitle.textContent = presetTitle;
          modalPresetDescription.textContent = presetDescription;

          // Update active dot
          document.querySelectorAll(".dot").forEach((dot, idx) => {
            if (idx === index) {
              dot.classList.add("active");
            } else {
              dot.classList.remove("active");
            }
          });
        }

        // Navigation buttons functionality
        prevBtn.addEventListener("click", () => {
          let newIndex = currentPresetIndex - 1;
          if (newIndex < 0) {
            newIndex = presets.length - 1; // Loop back to last preset
          }
          loadPresetToModal(newIndex);
        });

        nextBtn.addEventListener("click", () => {
          let newIndex = currentPresetIndex + 1;
          if (newIndex >= presets.length) {
            newIndex = 0; // Loop to first preset
          }
          loadPresetToModal(newIndex);
        });

        // Card click handler
        document.querySelectorAll(".preset-card").forEach((card, index) => {
          card.setAttribute("data-index", index);
          card.addEventListener("click", () => {
            const index = parseInt(card.getAttribute("data-index"));
            currentPresetIndex = index;
            createPaginationDots();
            loadPresetToModal(index);
            modal.show();
          });
        });

        // Reset when modal is closed
        document
          .getElementById("videoModal")
          .addEventListener("hidden.bs.modal", () => {
            modalVideo.pause();
            modalVideo.currentTime = 0;
          });

        // Initialize modal when shown
        document
          .getElementById("videoModal")
          .addEventListener("show.bs.modal", () => {
            createPaginationDots();
          });
      });
    </script>
  </body>
</html>
